{% import "macros/forms.html" as forms %}
{% extends "base.html" %}
{% block content %}

{% if message %}
<div class="alert label-success">
    <ul>
        <li>{{message}}</li>
    </ul>
</div>
{% endif %}


{% if user_logged_in %}
    <h1>Käyttäjän {{user_logged_in.kirjautumisnimi}} muistilista</h1>
    <p>
      <a href="{{base_path}}/tehtava/uusi" class="btn btn-success">Lisää tehtava</a>
    </p>

    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th>Tehtävän nimi</th>
          <th>Kuvaus</th>
          <th>Kiireellisyys (1-5)</th>
          <th>Status</th>
          <th>Lisäyspäivä</th>
          <th></th>
          <th></th>
        </tr>
      </thead>

      <tbody>
        {% for task in tasks %}
          <tr>
            <td><a href="{{base_path}}/tehtava/{{task.id}}">{{task.tehtavanimi}}</td>
            <td>{{task.kuvaus}}</td>
            <td>{{task.tarkeysaste}}</td>
            <td>
                {% if task.tehty %}
                  <label class="label label-success">tehty
                {% else %}
                  <label class="label label-danger">kesken
                {% endif %}
            </td>
            <td>{{task.luomisaika}}</td>
            <td>{{forms.muokkaus_nappain_pieni("#{base_path}/tehtava/#{task.id}/muokkaus")}}</td>
            <td>{{forms.poisto_nappain_pieni("#{base_path}/tehtava/#{task.id}/poista")}}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
{% else %}
{{forms.tama_toiminto_vaatii_kirjautumisen}}
{% endif %}


{% endblock %}